определить цифрПинТаймер(пин) н- цифр_пин_таймер к 
определить цифрПинМаска(пин) н- цифр_пин_маска к
определить цифрПинПорт(пин)  н- цифр_пин_порт к
определить ПортВыходРегистр(пин) н- порт_выход к

векторы_прерыв
н
	иниц_конец;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	вектор_16;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
	нет_прерыв;
к

линии_конец
н
	0;
	0;
	а;
	б;
	в;
к

порт_выход
н
	нет_порта;
	нет_порта;
	portb;
	portc;
	portd;
к

порт_вход
н
	нет_порта;
	нет_порта;
	portb;
	portc;
	portd;
к

цифр_пин_порт
н
	pd;
	pd;
	pd;
	pd;
	pd;
	pd;
	pd;
	pd;
	pb;
	pb;
	pb;
	pb;
	pb;
	pb;
	pc;
	pc;
	pc;
	pc;
	pc;
	pc;
к

цифр_пин_маска
н
	м0;
	м1;
	м2;
	м3;
	м4;
	м5;
	м6;
	м7;
	м0;
	м1;
	м2;
	м3;
	м4;
	м5;
	м0;
	м1;
	м2;
	м3;
	м4;
	м5;
к

цифр_пин_таймер
н
	нет_таймера;
	нет_таймера;
	нет_таймера;
	таймер_8;
	нет_таймера;
	таймер_2;
	таймер_1;
	нет_таймера;
	нет_таймера;
	таймер_3;
	таймер_4;
	таймер_8;
	нет_таймера;
	нет_таймера;
	нет_таймера;
	нет_таймера;
	нет_таймера;
	нет_таймера;
	нет_таймера;
	нет_таймера;
к

иниц_конец
н
	о с_рег = 0;
	д оп_конец1 = 08;
	д оп_конец2 = FF;
	о стек_верх = оп_конец1;
	о стек_низ = оп_конец2;
к

копир_иниц_данных 
н
	ст_оп2_копия = 1;
	д ст_оп1 = 00;
	д ст_оп2 = 01;
	д нач_дан1 = 08;
	д нач_дан2 = C0;
	переход сравнение;
редакт:
	нов_нач_дан = нач_дан;
	нов_нач_дан + 1;	
сравнение:
	если (ст_оп1 == 2)
	н
	  если (ст_оп2 != ст_оп2_копия)
		н
			переход редакт;
		к
	к
к

очистка_неиниц_данных
н
	ст_оп2_копия = 01;
	ст_оп1 = 02;
	ст_оп2 = 01;
	очистка_начало;
к

очистка_цикл
н
	х = ст_оп1;
к

очистка_начало
н
	если (ст_оп1 == 11)
	н
	  если (ст_оп2 != ст_оп2_копия)
	  н
		очистка_цикл;
	  к
	к
	главная();
	выход;
к

нет_прерыв
н
	векторы;
к

вклТаймер (таймер)
н
	если (таймер == TIMER1A)
	н 
		переход COM1A1; 
	к
	если (таймер != TIMER1A) 
	н
		переход TIMER2; 
	к

	если (таймер == TIMER1B)
	н
		переход COM1B1; 
	к

	если (таймер == TIMER1C)
	н
		переход COM1C1;  
	к
	
	если (таймер == TIMER2)
	н
		переход COM21; 
	к

	если (таймер == TIMER0A)
	н
		переход COM0A1; 
	к

	если ( таймер != TIMER0B)
	н
		переход выход;
	к

	т = TIMER0B;
	т И 223;
	переход переадрес;

	COM1A1:
	т = COM1A1;
	т И 127;
	переадрес:
	COM1A1 = т;
	конец;

	COM1B1:
	т = COM1B1;
	т И 127;
	переадрес2:
	COM1B1 = т;
	конец;

	COM1C1:
	т = COM1C1;
	т И 223;
	переход переадрес2;


	COM21:
	т = COM21;
	т И 127;
	переадрес3:
	т = COM21;
	конец;

	COM0A1:
	т = COM0A1;
	т И 223;
	переход переадрес3;
к

чтЦифр(пин)
н
	д таймер = цифрПинТаймер(пин);
	д бит = цифрПинМаска(пин);
	д порт = цифрПинПорт(пин);
	если (порт == нет_порта)
	н
	 переход низкий;
	к 
	если (таймер != нет_таймера)
	н
	 вклТаймер();
	к
	д порт2 = портВхРегистр(порт);
	если ( порт2 И бит)
	н
	 вернуть ВЫСОК;
	 переход результат;
	к
	вернуть НИЗК;
результат:
	конец;
низкий:
	вернуть низкий;
	переход результат;
к

запЦифр (пин, знач)
н
	д таймер = цифрПинТаймер(пин);
	д бит = цифрПинМаска(пин);
	д порт = цифрПинПорт(пин);
	если (порт == нет_порта)
	н
	 переход окончание;
	к
	вр_знач = знач;
	если (таймер != нет_таймера)
	н
	 вклТаймер();
	к
	д выход = портВыхРегистр(порт);
	вр_рег = с_рег;
	очистка();
	выход = с_рег;
	если (знач == НИЗК) 
	н
	 переход логика;
	к
	бит НЕ бит;
	выход И бит;
результат:
	знач = выход;
	с_рег = вр_рег;
	конец;
логика:
	выход ИЛИ бит;
	переход результат;
к